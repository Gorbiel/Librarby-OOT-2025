{"openapi":"3.1.0","info":{"title":"Librarby API","description":"Librarby - library management system API documentation","version":"1.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Books","description":"Endpoints for managing and browsing books"},{"name":"Rentals","description":"Endpoints for managing rentals"},{"name":"Book editions","description":"Endpoints for managing individual book editions"},{"name":"Reservations","description":"Endpoints for managing book reservations"},{"name":"Users","description":"Endpoints for managing user accounts"},{"name":"Publisher","description":"Endpoints for managing publishers"},{"name":"Librarians","description":"Endpoints for managing librarians"},{"name":"Authors","description":"Public endpoints for browsing authors"},{"name":"Book Copies","description":"Endpoints for managing book copies"},{"name":"Auth","description":"Endpoints for managing user authentication"},{"name":"Reviews","description":"Endpoints for managing book reviews"}],"paths":{"/api/v1/reservations/{reservationId}/assigned-book-copy":{"put":{"tags":["Reservations"],"summary":"Assign a book copy to a reservation","description":"Assign an exact book copy to a specific reservation","operationId":"assignCopyToReservation","parameters":[{"name":"reservationId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignCopyRequest"}}},"required":true},"responses":{"200":{"description":"Book copy assigned to reservation successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservationResponse"}}}},"404":{"description":"Reservation or Book Copy not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservationResponse"}}}},"400":{"description":"Invalid assignment request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservationResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/publishers/{publisherId}":{"get":{"tags":["Publisher"],"summary":"Get publisher by ID","description":"Retrieve a publisher by its unique ID.","operationId":"getPublisherById","parameters":[{"name":"publisherId","in":"path","description":"ID of the publisher to retrieve","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Publisher retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublisherResponse"}}}},"404":{"description":"Publisher not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublisherResponse"}}}}},"security":[{"bearerAuth":[]}]},"put":{"tags":["Publisher"],"summary":"Update an existing publisher","description":"Update the details of an existing publisher by its ID.","operationId":"updatePublisher","parameters":[{"name":"publisherId","in":"path","description":"ID of the publisher to update","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublisherUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Publisher updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublisherResponse"}}}},"400":{"description":"Invalid request data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublisherResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublisherResponse"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublisherResponse"}}}},"404":{"description":"Publisher not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublisherResponse"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Publisher"],"summary":"Delete a publisher","description":"Delete an existing publisher by its ID.","operationId":"deletePublisher","parameters":[{"name":"publisherId","in":"path","description":"ID of the publisher to delete","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"204":{"description":"Publisher deleted successfully"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Publisher not found"}},"security":[{"bearerAuth":[]}]}},"/api/v1/books/{bookId}/age-rating":{"put":{"tags":["Books"],"summary":"Set age rating","description":"Overwrites the book age rating.","operationId":"setAgeRating","parameters":[{"name":"bookId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgeRatingUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Age rating updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookResponse"}}}},"400":{"description":"Invalid input","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Book not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/authors/{authorId}":{"get":{"tags":["Authors"],"summary":"Get author by ID","description":"Returns a single author identified by their unique ID.","operationId":"getAuthorById","parameters":[{"name":"authorId","in":"path","description":"Author ID","required":true,"schema":{"type":"integer","format":"int64"},"example":5}],"responses":{"200":{"description":"Author retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorResponse"}}}},"404":{"description":"Author not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"put":{"tags":["Authors"],"summary":"Update author","description":"Overwrites author data. Requires ADMIN or LIBRARIAN.","operationId":"updateAuthor","parameters":[{"name":"authorId","in":"path","description":"Author ID","required":true,"schema":{"type":"integer","format":"int64"},"example":5}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Author updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorResponse"}}}},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Author not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Authors"],"summary":"Delete author","description":"Deletes an author ONLY if it is not referenced by any book.","operationId":"deleteAuthor","parameters":[{"name":"authorId","in":"path","description":"Author ID","required":true,"schema":{"type":"integer","format":"int64"},"example":5}],"responses":{"204":{"description":"Author deleted successfully"},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Author not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Author is referenced and cannot be deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/reservations":{"get":{"tags":["Reservations"],"summary":"Find reservations","description":"Retrieve reservations filtered by optional parameters","operationId":"findReservations","parameters":[{"name":"readerId","in":"query","description":"Filter by reader ID","required":false,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"bookId","in":"query","description":"Filter by book ID","required":false,"schema":{"type":"integer","format":"int64"},"example":2},{"name":"status","in":"query","description":"Filter by reservation status","required":false,"schema":{"type":"string","enum":["PENDING","ASSIGNED","COMPLETED","CANCELLED","EXPIRED"]},"example":"PENDING"},{"name":"sortDirection","in":"query","description":"Sort direction: ASC or DESC","required":false,"schema":{"type":"string","default":"ASC"},"example":"ASC"},{"name":"limit","in":"query","description":"Limit number of results","required":false,"schema":{"type":"integer","format":"int32"},"example":10}],"responses":{"200":{"description":"Reservations retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReservationResponse"}}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReservationResponse"}}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["Reservations"],"summary":"Create a new reservation","description":"Place a new reservation for a book","operationId":"createReservation","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservationRequest"}}},"required":true},"responses":{"201":{"description":"Reservation created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservationResponse"}}}},"400":{"description":"Invalid reservation request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservationResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/rentals":{"get":{"tags":["Rentals"],"summary":"Get rentals","description":"Retrieves rentals with optional filters.\nAdmin/Librarian: can view all rentals and filter freely.\nReader: must provide readerId equal to their own id.\n","operationId":"getRentals","parameters":[{"name":"readerId","in":"query","description":"Filter by reader ID (required for READER role)","required":false,"schema":{"type":"integer","format":"int64"},"example":123},{"name":"bookId","in":"query","description":"Filter by book ID (title-level)","required":false,"schema":{"type":"integer","format":"int64"},"example":12},{"name":"status","in":"query","description":"Filter by rental status","required":false,"schema":{"type":"string","enum":["ACTIVE","ON_TIME","LATE"]},"example":"ACTIVE"},{"name":"active","in":"query","description":"Filter by active flag: true = not returned, false = returned","required":false,"schema":{"type":"boolean"},"example":true}],"responses":{"200":{"description":"Rentals retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultipleRentalsResponse"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden – insufficient privileges or readerId mismatch/missing","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["Rentals"],"summary":"Create rental","description":"Creates a new rental for a reader and an exact book copy. Requires admin or librarian privileges.","operationId":"createRental","requestBody":{"description":"Rental creation payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRentalRequest"}}},"required":true},"responses":{"201":{"description":"Rental created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RentalResponse"}}}},"400":{"description":"Invalid input data or copy not available","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden – insufficient privileges","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Reader or copy not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/rentals/{rentalId}/return":{"post":{"tags":["Rentals"],"summary":"Return rental","description":"Marks a rental as returned and updates the copy status. Requires admin or librarian privileges.","operationId":"returnRental","parameters":[{"name":"rentalId","in":"path","description":"Rental ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1001}],"responses":{"200":{"description":"Rental returned successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RentalResponse"}}}},"400":{"description":"Rental already returned or invalid state","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden – insufficient privileges","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Rental not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/publishers":{"get":{"tags":["Publisher"],"summary":"Get all publishers","description":"Retrieve a list of all publishers, optionally filtered by a query string.","operationId":"getAllPublishers","parameters":[{"name":"q","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Publishers retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultiplePublishersResponse"}}}},"400":{"description":"Invalid query parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultiplePublishersResponse"}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["Publisher"],"summary":"Create a new publisher","description":"Create a new publisher with the provided details.","operationId":"createPublisher","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublisherCreateRequest"}}},"required":true},"responses":{"201":{"description":"Publisher created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublisherResponse"}}}},"400":{"description":"Invalid request data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublisherResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublisherResponse"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublisherResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/librarians":{"post":{"tags":["Librarians"],"summary":"Create librarian","description":"Promotes an existing user to a librarian role. Requires ADMIN role.","operationId":"createLibrarian","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LibrarianCreateRequest"}}},"required":true},"responses":{"201":{"description":"Librarian created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"400":{"description":"Invalid request data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/books":{"get":{"tags":["Books"],"summary":"List books","description":"Returns books. Optional query params allow basic filtering.","operationId":"getBooks","parameters":[{"name":"title","in":"query","description":"Filter by title substring (case-insensitive)","required":false,"schema":{"type":"string"},"example":"gatsby"},{"name":"genre","in":"query","description":"Filter by genre","required":false,"schema":{"type":"string","enum":["FICTION","FANTASY","SCIENCE_FICTION","DYSTOPIAN","ACTION_AND_ADVENTURE","MYSTERY","HORROR","THRILLER","HISTORICAL_FICTION","ROMANCE","CONTEMPORARY_FICTION","LITERARY_FICTION","GRAPHIC_NOVEL","SHORT_STORY","NON_FICTION","MEMOIR","BIOGRAPHY","AUTOBIOGRAPHY","HISTORY","TRAVEL","TRUE_CRIME","HUMOR","ESSAYS","GUIDE_HOW_TO","RELIGION_AND_SPIRITUALITY","HUMANITIES","SCIENCE_AND_TECHNOLOGY","PARENTING","SELF_HELP","COOKBOOK","ART_AND_PHOTOGRAPHY","POETRY"]},"example":"FICTION"},{"name":"authorId","in":"query","description":"Filter by author ID","required":false,"schema":{"type":"integer","format":"int64"},"example":5},{"name":"ageRating","in":"query","description":"Filter by age rating","required":false,"schema":{"type":"string","enum":["EVERYONE","TODDLER","CHILDREN","TEENAGER","ADULT"]},"example":"ADULT"}],"responses":{"200":{"description":"Books retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultipleBooksResponse"}}}},"400":{"description":"Invalid query parameter(s)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["Books"],"summary":"Create a book","description":"Creates a book with optional authors and genres.","operationId":"createBook","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookCreateRequest"}}},"required":true},"responses":{"201":{"description":"Book created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookResponse"}}}},"400":{"description":"Invalid input","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Author(s) not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/books/{bookId}/reviews":{"post":{"tags":["Reviews"],"summary":"Create a review","description":"Creates a new review for a specific book. Readers can create reviews only for themselves, admins can create for anyone.","operationId":"createReview","parameters":[{"name":"bookId","in":"path","description":"Book ID","required":true,"schema":{"type":"integer","format":"int64"},"example":5}],"requestBody":{"description":"Review data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateReviewRequest"}}},"required":true},"responses":{"201":{"description":"Review created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewResponse"}}}},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden – insufficient privileges","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Book or book edition not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/books/{bookId}/genres/{genre}":{"post":{"tags":["Books"],"summary":"Add genre to book","operationId":"addGenre","parameters":[{"name":"bookId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"genre","in":"path","required":true,"schema":{"type":"string","enum":["FICTION","FANTASY","SCIENCE_FICTION","DYSTOPIAN","ACTION_AND_ADVENTURE","MYSTERY","HORROR","THRILLER","HISTORICAL_FICTION","ROMANCE","CONTEMPORARY_FICTION","LITERARY_FICTION","GRAPHIC_NOVEL","SHORT_STORY","NON_FICTION","MEMOIR","BIOGRAPHY","AUTOBIOGRAPHY","HISTORY","TRAVEL","TRUE_CRIME","HUMOR","ESSAYS","GUIDE_HOW_TO","RELIGION_AND_SPIRITUALITY","HUMANITIES","SCIENCE_AND_TECHNOLOGY","PARENTING","SELF_HELP","COOKBOOK","ART_AND_PHOTOGRAPHY","POETRY"]}}],"responses":{"200":{"description":"Genre added successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookResponse"}}}},"400":{"description":"Invalid genre","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Book not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Genre already assigned to this book","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Books"],"summary":"Remove genre from book","operationId":"removeGenre","parameters":[{"name":"bookId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"genre","in":"path","required":true,"schema":{"type":"string","enum":["FICTION","FANTASY","SCIENCE_FICTION","DYSTOPIAN","ACTION_AND_ADVENTURE","MYSTERY","HORROR","THRILLER","HISTORICAL_FICTION","ROMANCE","CONTEMPORARY_FICTION","LITERARY_FICTION","GRAPHIC_NOVEL","SHORT_STORY","NON_FICTION","MEMOIR","BIOGRAPHY","AUTOBIOGRAPHY","HISTORY","TRAVEL","TRUE_CRIME","HUMOR","ESSAYS","GUIDE_HOW_TO","RELIGION_AND_SPIRITUALITY","HUMANITIES","SCIENCE_AND_TECHNOLOGY","PARENTING","SELF_HELP","COOKBOOK","ART_AND_PHOTOGRAPHY","POETRY"]}}],"responses":{"200":{"description":"Genre removed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookResponse"}}}},"400":{"description":"Invalid genre","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Book not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Genre is not assigned to this book","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/books/{bookId}/authors/{authorId}":{"post":{"tags":["Books"],"summary":"Add author to book","operationId":"addAuthor","parameters":[{"name":"bookId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"authorId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Author linked successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookResponse"}}}},"400":{"description":"Invalid path parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Book or author not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Author already linked to book","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Books"],"summary":"Remove author from book","operationId":"removeAuthor","parameters":[{"name":"bookId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"authorId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Author unlinked successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookResponse"}}}},"400":{"description":"Invalid path parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Book not found or author not linked","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Author is not assigned to this book","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/books/exact-book/create-book":{"post":{"tags":["Book Copies"],"summary":"Create Exact Book Copy","description":"Creates a new exact book copy","operationId":"createExactBookCopy","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateExactBookCopyRequest"}}},"required":true},"responses":{"201":{"description":"Exact book copy created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExactBookCopyResponse"}}}},"400":{"description":"Invalid request data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExactBookCopyResponse"}}}},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExactBookCopyResponse"}}}},"404":{"description":"Referenced book not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExactBookCopyResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/book-editions":{"post":{"tags":["Book editions"],"summary":"Create book edition","description":"Create a new edition for an existing book.","operationId":"createBookEdition","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBookEditionRequest"}}},"required":true},"responses":{"201":{"description":"Book edition created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BookEditionResponse"}}}},"400":{"description":"Invalid input or ISBN already exists","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Referenced book or publisher not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/authors":{"get":{"tags":["Authors"],"summary":"List authors","description":"Returns all authors, or filters by query string (case-insensitive)","operationId":"listAuthors","parameters":[{"name":"q","in":"query","description":"Case-insensitive search","required":false,"schema":{"type":"string"},"example":"fitz"}],"responses":{"200":{"description":"Authors retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultipleAuthorsResponse"}}}},"400":{"description":"Invalid query parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["Authors"],"summary":"Create author","description":"Creates a new author. Requires ADMIN or LIBRARIAN.","operationId":"createAuthor","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorCreateRequest"}}},"required":true},"responses":{"201":{"description":"Author created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorResponse"}}}},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden – insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/auth/register":{"post":{"tags":["Auth"],"summary":"Register new user","description":"Creates a new reader account in the system","operationId":"registerNewReader","requestBody":{"description":"New reader registration data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterReaderRequest"}}},"required":true},"responses":{"201":{"description":"Reader registered successfully"},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"User already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["Auth"],"summary":"User login","description":"Authenticates a user and returns a JWT token","operationId":"login","requestBody":{"description":"User login credentials","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Invalid credentials","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}}}},"/api/v1/users/{userId}":{"get":{"tags":["Users"],"summary":"Get user by ID","description":"Retrieves a user account by its unique ID. Requires admin or librarian privileges. Allows readers to retrieve their own account data.","operationId":"getUserById","parameters":[{"name":"userId","in":"path","description":"User account ID","required":true,"schema":{"type":"integer","format":"int64"},"example":123}],"responses":{"200":{"description":"User account retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Access denied – insufficient privileges or not the account owner","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"User account not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Users"],"summary":"Delete user by ID","description":"Deletes a user account identified by its unique ID. Requires admin or librarian privileges.","operationId":"deleteUserById","parameters":[{"name":"userId","in":"path","description":"User account ID","required":true,"schema":{"type":"integer","format":"int64"},"example":123}],"responses":{"204":{"description":"User account deleted successfully"},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Access denied – admin privileges required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"User account not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"patch":{"tags":["Users"],"summary":"Update user by ID","description":"Updates the details of a user account identified by its unique ID. Requires admin or librarian privileges. Allows readers to update their own account data.","operationId":"updateUserById","parameters":[{"name":"userId","in":"path","description":"User account ID","required":true,"schema":{"type":"integer","format":"int64"},"example":2137}],"requestBody":{"description":"Fields to update for the user account","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateRequest"}}},"required":true},"responses":{"200":{"description":"User account updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Access denied – insufficient privileges or not the account owner","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"User account not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/rentals/{rentalId}":{"get":{"tags":["Rentals"],"summary":"Get rental by ID","description":"Retrieves a rental by its ID. Admin/Librarian can view any rental. Reader can view only rentals that belong to them.","operationId":"getRentalById","parameters":[{"name":"rentalId","in":"path","description":"Rental ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1001}],"responses":{"200":{"description":"Rental retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RentalResponse"}}}},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden – rental does not belong to the reader","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Rental not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"patch":{"tags":["Rentals"],"summary":"Extend rental due date","description":"Extends the due date for an active rental. Requires admin or librarian privileges.","operationId":"extendDueDate","parameters":[{"name":"rentalId","in":"path","description":"Rental ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1001}],"requestBody":{"description":"New due date","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExtendRentalRequest"}}},"required":true},"responses":{"200":{"description":"Rental due date extended successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RentalResponse"}}}},"400":{"description":"Invalid due date or rental state","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden – insufficient privileges","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Rental not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/books/{bookId}":{"get":{"tags":["Books"],"summary":"Get book by ID","operationId":"getBookById","parameters":[{"name":"bookId","in":"path","description":"Book ID","required":true,"schema":{"type":"integer","format":"int64"},"example":10}],"responses":{"200":{"description":"Book retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookResponse"}}}},"400":{"description":"Invalid path parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Book not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Books"],"summary":"Delete book","description":"Deletes a book ONLY if it is not referenced by other records.","operationId":"deleteBook","parameters":[{"name":"bookId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Book deleted"},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Book not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Book is referenced and cannot be deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"patch":{"tags":["Books"],"summary":"Update book","description":"Partially updates book fields such as title, genres, age rating, or authors.","operationId":"updateBook","parameters":[{"name":"bookId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Book updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookResponse"}}}},"400":{"description":"Invalid input","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Book not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/books/{bookId}/reviews/{reviewId}":{"get":{"tags":["Reviews"],"summary":"Get a review by ID","description":"Retrieves a single review by its ID. Public endpoint.","operationId":"getReviewById","parameters":[{"name":"bookId","in":"path","description":"Book ID","required":true,"schema":{"type":"integer","format":"int64"},"example":5},{"name":"reviewId","in":"path","description":"Review ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Review retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewResponse"}}}},"404":{"description":"Review not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Reviews"],"summary":"Delete a review","description":"Deletes an existing review. Only the review owner or admins/librarians can delete.","operationId":"deleteReview","parameters":[{"name":"bookId","in":"path","description":"Book ID","required":true,"schema":{"type":"integer","format":"int64"},"example":5},{"name":"reviewId","in":"path","description":"Review ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"204":{"description":"Review deleted successfully"},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden – not the owner or insufficient privileges","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Review not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"patch":{"tags":["Reviews"],"summary":"Update a review","description":"Updates an existing review. Only the review owner or admins/librarians can update. Supports partial updates.","operationId":"updateReview","parameters":[{"name":"bookId","in":"path","description":"Book ID","required":true,"schema":{"type":"integer","format":"int64"},"example":5},{"name":"reviewId","in":"path","description":"Review ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"description":"Review update data (partial)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateReviewRequest"}}},"required":true},"responses":{"200":{"description":"Review updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewResponse"}}}},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Forbidden – not the owner or insufficient privileges","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Review or book edition not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Conflict – book edition already assigned or does not belong to the book","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/books/exact-book/{id}":{"patch":{"tags":["Book Copies"],"summary":"Update Exact Book Copy","description":"Updates an existing exact book copy by its ID","operationId":"updateExactBookCopy","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateExactBookCopyRequest"}}},"required":true},"responses":{"200":{"description":"Exact book copy updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExactBookCopyResponse"}}}},"400":{"description":"Invalid request data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExactBookCopyResponse"}}}},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExactBookCopyResponse"}}}},"404":{"description":"Exact book copy not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExactBookCopyResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/book-editions/{id}":{"get":{"tags":["Book editions"],"summary":"Get book edition by ID","description":"Fetch a single book edition by its identifier.","operationId":"getBookEdition","parameters":[{"name":"id","in":"path","description":"Book edition ID","required":true,"schema":{"type":"integer","format":"int64"},"example":15}],"responses":{"200":{"description":"Book edition retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BookEditionResponse"}}}},"400":{"description":"Invalid path parameter","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Book edition not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Book editions"],"summary":"Delete book edition","description":"Delete a book edition if it is not referenced by other records.","operationId":"deleteBookEdition","parameters":[{"name":"id","in":"path","description":"Book edition ID","required":true,"schema":{"type":"integer","format":"int64"},"example":15}],"responses":{"204":{"description":"Book edition deleted"},"404":{"description":"Book edition not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Cannot delete because the edition is referenced by other records","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]},"patch":{"tags":["Book editions"],"summary":"Update book edition","description":"Partially update fields of a book edition.","operationId":"updateBookEditionById","parameters":[{"name":"id","in":"path","description":"Book edition ID","required":true,"schema":{"type":"integer","format":"int64"},"example":15}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateBookEditionRequest"}}},"required":true},"responses":{"200":{"description":"Book edition updated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BookEditionResponse"}}}},"400":{"description":"Invalid input","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Book edition or referenced entity not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"409":{"description":"Conflict - update would violate uniqueness or business rules","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/users":{"get":{"tags":["Users"],"summary":"Get all users","description":"Retrieves a list of all user accounts in the system. Requires admin or librarian privileges.","operationId":"getAllUsers","responses":{"200":{"description":"List of users retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultipleUsersResponse"}}}},"401":{"description":"Unauthorized – authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"403":{"description":"Access denied – admin privileges required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/reviews":{"get":{"tags":["Reviews"],"summary":"Get all reviews with filters","description":"Retrieves a list of reviews with optional filters and sorting. Public endpoint.","operationId":"getAllReviews","parameters":[{"name":"readerId","in":"query","description":"Filter by reader ID","required":false,"schema":{"type":"integer","format":"int64"},"example":10},{"name":"bookId","in":"query","description":"Filter by book ID","required":false,"schema":{"type":"integer","format":"int64"},"example":5},{"name":"bookEditionId","in":"query","description":"Filter by book edition ID","required":false,"schema":{"type":"integer","format":"int64"},"example":15},{"name":"limit","in":"query","description":"Maximum number of results to return","required":false,"schema":{"type":"integer","format":"int32"},"example":20},{"name":"sortDirection","in":"query","description":"Sort direction by creation date (asc or desc)","required":false,"schema":{"type":"string","default":"desc"},"example":"desc"}],"responses":{"200":{"description":"Reviews retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultipleReviewsResponse"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/reservations/{reservationId}":{"get":{"tags":["Reservations"],"summary":"Get reservation by ID","description":"Retrieve a specific reservation by its ID","operationId":"getReservationById","parameters":[{"name":"reservationId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Reservation retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservationResponse"}}}},"404":{"description":"Reservation not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReservationResponse"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Reservations"],"summary":"Cancel a reservation","description":"Cancel a specific reservation by its ID","operationId":"cancelReservation","parameters":[{"name":"reservationId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Reservation cancelled successfully"},"404":{"description":"Reservation not found"}},"security":[{"bearerAuth":[]}]}},"/api/v1/books/{bookId}/editions":{"get":{"tags":["Books"],"summary":"List book editions","description":"Returns all editions of a book identified by its ID.","operationId":"getBookEditions","parameters":[{"name":"bookId","in":"path","description":"Book ID","required":true,"schema":{"type":"integer","format":"int64"},"example":10}],"responses":{"200":{"description":"Book editions retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultipleBookEditionResponse"}}}},"400":{"description":"Invalid bookId supplied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"404":{"description":"Book not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/books/genres":{"get":{"tags":["Books"],"summary":"List genres","description":"Returns all available genres.","operationId":"getGenres","responses":{"200":{"description":"Genres retrieved successfully","content":{"application/json":{"schema":{"type":"string","enum":["FICTION","FANTASY","SCIENCE_FICTION","DYSTOPIAN","ACTION_AND_ADVENTURE","MYSTERY","HORROR","THRILLER","HISTORICAL_FICTION","ROMANCE","CONTEMPORARY_FICTION","LITERARY_FICTION","GRAPHIC_NOVEL","SHORT_STORY","NON_FICTION","MEMOIR","BIOGRAPHY","AUTOBIOGRAPHY","HISTORY","TRAVEL","TRUE_CRIME","HUMOR","ESSAYS","GUIDE_HOW_TO","RELIGION_AND_SPIRITUALITY","HUMANITIES","SCIENCE_AND_TECHNOLOGY","PARENTING","SELF_HELP","COOKBOOK","ART_AND_PHOTOGRAPHY","POETRY"]}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/books/exact-book/{bookId}":{"get":{"tags":["Book Copies"],"summary":"Get Exact Book Copy","description":"Retrieves an exact book copy by its ID","operationId":"getExactBookCopy","parameters":[{"name":"bookId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Exact book copy retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExactBookCopyResponse"}}}},"404":{"description":"Exact book copy not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExactBookCopyResponse"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Book Copies"],"summary":"Delete Exact Book Copy","description":"Deletes an exact book copy by its ID","operationId":"deleteExactBookCopy","parameters":[{"name":"bookId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Exact book copy deleted successfully"},"403":{"description":"Access denied"},"404":{"description":"Exact book copy not found"}},"security":[{"bearerAuth":[]}]}},"/api/v1/books/age-ratings":{"get":{"tags":["Books"],"summary":"List age ratings","description":"Returns all available age ratings.","operationId":"getAgeRatings","responses":{"200":{"description":"Age ratings retrieved successfully","content":{"application/json":{"schema":{"type":"string","enum":["EVERYONE","TODDLER","CHILDREN","TEENAGER","ADULT"]}}}}},"security":[{"bearerAuth":[]}]}},"/api/v1/authors/{authorId}/books":{"get":{"tags":["Authors"],"summary":"List books by author","description":"Returns all books linked to the given author.","operationId":"getBooksByAuthor","parameters":[{"name":"authorId","in":"path","description":"Author ID","required":true,"schema":{"type":"integer","format":"int64"},"example":5}],"responses":{"200":{"description":"Books retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultipleBooksResponse"}}}},"404":{"description":"Author not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"bearerAuth":[]}]}}},"components":{"schemas":{"AssignCopyRequest":{"type":"object","properties":{"exactBookCopyId":{"type":"integer","format":"int64","description":"ID of the exact book copy to be assigned","example":123},"holdExpirationDate":{"type":"string","format":"date","description":"Expiration date of the hold on the assigned book copy","example":"2024-12-31"}},"required":["exactBookCopyId","holdExpirationDate"]},"ReservationResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64","description":"ID of the reservation","example":15},"bookId":{"type":"integer","format":"int64","description":"ID of the reserved book","example":10},"readerId":{"type":"integer","format":"int64","description":"ID of the reader who made the reservation","example":5},"status":{"type":"string","description":"Current status of the reservation","example":"ACTIVE"},"createdAt":{"type":"string","format":"date-time","description":"Timestamp when the reservation was created","example":"2024-05-01T12:34:56Z"},"assignedCopyId":{"type":"integer","format":"int64","description":"ID of the assigned book copy, if any","example":20},"holdExpirationDate":{"type":"string","format":"date","description":"Expiration date of the hold on the assigned book copy, if any","example":"2024-12-31"}}},"PublisherUpdateRequest":{"type":"object","description":"Request payload for updating a publisher","properties":{"name":{"type":"string","description":"Publisher name (required)","example":"Penguin Random House","minLength":1}},"required":["name"]},"PublisherResponse":{"type":"object","description":"Author data returned by the API","properties":{"id":{"type":"integer","format":"int64","description":"Publisher ID","example":3},"name":{"type":"string","description":"Publisher name","example":"Penguin Random House"}}},"AgeRatingUpdateRequest":{"type":"object","description":"Request payload to overwrite a book's age rating","properties":{"ageRating":{"type":"string","description":"New age rating","enum":["EVERYONE","TODDLER","CHILDREN","TEENAGER","ADULT"],"example":"ADULT"}},"required":["ageRating"]},"AuthorResponse":{"type":"object","description":"Author data returned by the API","properties":{"id":{"type":"integer","format":"int64","description":"Author ID","example":5},"firstName":{"type":"string","description":"Author first name","example":"F."},"middleName":{"type":"string","description":"Author middle name","example":"Scott"},"lastName":{"type":"string","description":"Author last name","example":"Fitzgerald"}}},"BookResponse":{"type":"object","description":"Book data returned by the API","properties":{"id":{"type":"integer","format":"int64","description":"Book (title-level) ID","example":10},"title":{"type":"string","description":"Book title","example":"The Great Gatsby"},"genres":{"type":"array","description":"Genres assigned to the book","example":["FICTION","LITERARY_FICTION"],"items":{"type":"string","enum":["FICTION","FANTASY","SCIENCE_FICTION","DYSTOPIAN","ACTION_AND_ADVENTURE","MYSTERY","HORROR","THRILLER","HISTORICAL_FICTION","ROMANCE","CONTEMPORARY_FICTION","LITERARY_FICTION","GRAPHIC_NOVEL","SHORT_STORY","NON_FICTION","MEMOIR","BIOGRAPHY","AUTOBIOGRAPHY","HISTORY","TRAVEL","TRUE_CRIME","HUMOR","ESSAYS","GUIDE_HOW_TO","RELIGION_AND_SPIRITUALITY","HUMANITIES","SCIENCE_AND_TECHNOLOGY","PARENTING","SELF_HELP","COOKBOOK","ART_AND_PHOTOGRAPHY","POETRY"]},"uniqueItems":true},"ageRating":{"type":"string","description":"Age rating of the book","enum":["EVERYONE","TODDLER","CHILDREN","TEENAGER","ADULT"],"example":"ADULT"},"authors":{"type":"array","description":"Authors assigned to the book","items":{"$ref":"#/components/schemas/AuthorResponse"},"uniqueItems":true}}},"ApiErrorResponse":{"type":"object","description":"Standard error response returned by the API when a request fails","properties":{"timestamp":{"type":"string","format":"date-time","description":"Time when the error occurred (ISO-8601)","example":"2026-01-07T09:56:45.566570068"},"status":{"type":"integer","format":"int32","description":"HTTP status code","example":418},"error":{"type":"string","description":"HTTP status name","example":"I_AM_A_TEAPOT"},"message":{"type":"string","description":"Detailed error message","example":"I am a teapot and cannot brew coffee"},"path":{"type":"string","description":"Request path that caused the error","example":"/api/v1/tea/2137"},"metadata":{"type":"object","additionalProperties":{}}}},"AuthorUpdateRequest":{"type":"object","description":"Request payload for partially updating an author","properties":{"firstName":{"type":"string","description":"Author first name (required)","example":"Francis","minLength":1},"middleName":{"type":"string","description":"Author middle name (optional)","example":"Scott"},"lastName":{"type":"string","description":"Author last name (optional)","example":"Fitzgerald"}},"required":["firstName"]},"ReservationRequest":{"type":"object","properties":{"readerId":{"type":"integer","format":"int64","description":"ID of the reader making the reservation","example":5},"bookId":{"type":"integer","format":"int64","description":"ID of the book to be reserved","example":10}},"required":["bookId","readerId"]},"CreateRentalRequest":{"type":"object","description":"Request payload for creating a new rental","properties":{"readerId":{"type":"integer","format":"int64","description":"Reader ID (same as user account ID)","example":2137},"copyId":{"type":"integer","format":"int64","description":"Exact book copy ID to rent","example":420},"dueDate":{"type":"string","format":"date","description":"Due date of the rental (must be in the future)","example":"2026-02-01"}},"required":["copyId","dueDate","readerId"]},"RentalResponse":{"type":"object","description":"Rental data returned by the API","properties":{"id":{"type":"integer","format":"int64","description":"Rental ID","example":1001},"readerId":{"type":"integer","format":"int64","description":"Reader ID (same as user account ID)","example":2137},"copyId":{"type":"integer","format":"int64","description":"Exact book copy ID rented","example":456},"editionId":{"type":"integer","format":"int64","description":"Book edition ID for the rented copy","example":77},"bookId":{"type":"integer","format":"int64","description":"Book (title-level) ID for the rented copy","example":12},"bookTitle":{"type":"string","description":"Book title","example":"Dune"},"status":{"type":"string","description":"Rental status","enum":["ACTIVE","ON_TIME","LATE"],"example":"ACTIVE"},"dueDate":{"type":"string","format":"date","description":"Due date (date only)","example":"2026-02-01"},"rentedAt":{"type":"string","format":"date-time","description":"Rental creation timestamp","example":"2026-01-09T12:34:56"},"returnedAt":{"type":"string","format":"date-time","description":"Return timestamp (null if not returned yet)","example":"2026-01-20T10:15:00"}}},"PublisherCreateRequest":{"type":"object","description":"Request payload for creating a publisher","properties":{"name":{"type":"string","description":"Publisher name (required)","example":"Penguin Random House","minLength":1}},"required":["name"]},"LibrarianCreateRequest":{"type":"object","properties":{"username":{"type":"string","description":"Username for the new librarian","example":"librarian_jane"}},"required":["username"]},"UserResponse":{"type":"object","description":"Response payload containing user account information","properties":{"id":{"type":"integer","format":"int64","description":"Unique identifier of the user","example":1},"username":{"type":"string","description":"Username of the user","example":"john_doe"},"email":{"type":"string","description":"Email address of the user","example":"john_doe@example.com"},"role":{"type":"string","description":"Role of the user in the system","enum":["READER","LIBRARIAN","ADMIN"],"example":"READER"},"firstName":{"type":"string","description":"First name of the user","example":"John"},"lastName":{"type":"string","description":"Last name of the user","example":"Doe"},"roleSpecificData":{"type":"object","additionalProperties":{},"description":"Additional data specific to the user's role","example":{"rentalLimit":5,"dateOfBirth":"2001-09-11"}}}},"BookCreateRequest":{"type":"object","description":"Request payload for creating a new book","properties":{"title":{"type":"string","description":"Book title","example":"The Hobbit"},"genres":{"type":"array","description":"Genres to assign to the book","example":["FANTASY","ACTION_AND_ADVENTURE"],"items":{"type":"string","enum":["FICTION","FANTASY","SCIENCE_FICTION","DYSTOPIAN","ACTION_AND_ADVENTURE","MYSTERY","HORROR","THRILLER","HISTORICAL_FICTION","ROMANCE","CONTEMPORARY_FICTION","LITERARY_FICTION","GRAPHIC_NOVEL","SHORT_STORY","NON_FICTION","MEMOIR","BIOGRAPHY","AUTOBIOGRAPHY","HISTORY","TRAVEL","TRUE_CRIME","HUMOR","ESSAYS","GUIDE_HOW_TO","RELIGION_AND_SPIRITUALITY","HUMANITIES","SCIENCE_AND_TECHNOLOGY","PARENTING","SELF_HELP","COOKBOOK","ART_AND_PHOTOGRAPHY","POETRY"]},"uniqueItems":true},"ageRating":{"type":"string","description":"Optional age rating","enum":["EVERYONE","TODDLER","CHILDREN","TEENAGER","ADULT"],"example":"EVERYONE"},"authorIds":{"type":"array","description":"Existing author IDs to link to this book","example":[5,8],"items":{"type":"integer","format":"int64"},"uniqueItems":true}},"required":["title"]},"CreateReviewRequest":{"type":"object","description":"Request payload for creating a review","properties":{"readerId":{"type":"integer","format":"int64","description":"Reader ID (must match authenticated user's ID unless admin)","example":10},"rating":{"type":"integer","format":"int32","description":"Rating from 1 to 5","example":5,"maximum":5,"minimum":1},"text":{"type":"string","description":"Review text (optional)","example":"Great book!"},"bookEditionId":{"type":"integer","format":"int64","description":"Book edition ID (optional)","example":10}},"required":["rating","readerId"]},"ReviewResponse":{"type":"object","description":"Response payload containing review data","properties":{"id":{"type":"integer","format":"int64","description":"Review ID","example":1},"bookId":{"type":"integer","format":"int64","description":"Book ID","example":5},"readerId":{"type":"integer","format":"int64","description":"Reader ID","example":10},"bookEditionId":{"type":"integer","format":"int64","description":"Book edition ID (optional)","example":15},"rating":{"type":"integer","format":"int32","description":"Rating from 1 to 5","example":5},"text":{"type":"string","description":"Review text","example":"Great book!"},"createdAt":{"type":"string","format":"date-time","description":"Review creation timestamp","example":"2026-01-16T12:00:00Z"},"verified":{"type":"boolean","description":"Whether the reader has rented this book from the library before writing the review","example":true}}},"CreateExactBookCopyRequest":{"type":"object","properties":{"bookEditionId":{"type":"integer","format":"int64","description":"ID of the book edition to which this copy belongs","example":15},"status":{"type":"string","description":"Status of the book copy","enum":["AVAILABLE","BORROWED","RESERVED","LOST","UNAVAILABLE"],"example":"AVAILABLE"}},"required":["bookEditionId","status"]},"BookBriefResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64","description":"Book (title-level) ID","example":10},"title":{"type":"string","description":"Book title","example":"The Great Gatsby"}}},"BookEditionResponse":{"type":"object","description":"Book edition data returned by the API","properties":{"id":{"type":"integer","format":"int64","description":"Book edition ID","example":10},"isbn":{"$ref":"#/components/schemas/ISBN","description":"International Standard Book Number (ISBN) of the edition","example":"978-3-16-148410-0"},"book":{"$ref":"#/components/schemas/BookBriefResponse","description":"Reference to the parent book (title-level)"},"pageCount":{"type":"integer","format":"int32","description":"Number of pages in the edition","example":320},"publicationYear":{"type":"string","format":"int32","description":"Year of publication","example":2013},"publisher":{"$ref":"#/components/schemas/PublisherResponse","description":"Publisher information for this edition"},"language":{"type":"string","description":"Language of the edition expressed as IETF BCP 47 tag or ISO language code","example":"en"}}},"ExactBookCopyResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64","description":"Exact book copy ID","example":100},"bookEdition":{"$ref":"#/components/schemas/BookEditionResponse","description":"Information about the book edition to which this copy belongs"},"status":{"type":"string","description":"Status of the book copy","enum":["AVAILABLE","BORROWED","RESERVED","LOST","UNAVAILABLE"],"example":"AVAILABLE"}}},"ISBN":{"type":"object","properties":{"value":{"type":"string"}}},"CreateBookEditionRequest":{"type":"object","properties":{"bookId":{"type":"integer","format":"int64","description":"ID of the book to which this edition belongs","example":10},"isbn":{"type":"string","description":"ISBN of the book edition","example":"978-3-16-148410-0"},"pageCount":{"type":"integer","format":"int32","description":"Number of pages in the book edition","example":320},"publicationYear":{"type":"integer","format":"int32","description":"Publication year of the book edition","example":2013},"publisherId":{"type":"integer","format":"int64","description":"ID of the publisher of the book edition","example":5},"language":{"type":"string","description":"Language of the book edition expressed as IETF BCP 47 tag or ISO language code","example":"en"}},"required":["bookId","isbn","language","pageCount","publicationYear","publisherId"]},"AuthorCreateRequest":{"type":"object","description":"Request payload for creating an author","properties":{"firstName":{"type":"string","description":"Author first name (required). Can also be used as a pseudonym","example":"F.","minLength":1},"middleName":{"type":"string","description":"Author middle name (optional)","example":"Scott"},"lastName":{"type":"string","description":"Author last name (optional)","example":"Fitzgerald"}},"required":["firstName"]},"RegisterReaderRequest":{"type":"object","description":"Request payload for registering a new reader","properties":{"username":{"type":"string","description":"Desired username for the new reader account","example":"john_doe","maxLength":50,"minLength":3},"password":{"type":"string","description":"Password for the new reader account","example":"P@ssw0rd!","maxLength":2147483647,"minLength":8},"email":{"type":"string","format":"email","description":"Email address of the new reader","example":"john_doe@example.com","minLength":1},"firstName":{"type":"string","description":"First name of the new reader","example":"John","minLength":1},"lastName":{"type":"string","description":"Last name of the new reader","example":"Doe","minLength":1},"dateOfBirth":{"type":"string","format":"date","description":"Date of birth of the new reader","example":"2001-09-11"}},"required":["dateOfBirth","email","firstName","lastName","password","username"]},"LoginRequest":{"type":"object","description":"Request payload for user login","properties":{"username":{"type":"string","description":"Username of the user trying to log in","example":"john_doe","minLength":1},"password":{"type":"string","description":"Password of the user trying to log in","example":"P@ssw0rd!","minLength":1}},"required":["password","username"]},"LoginResponse":{"type":"object","description":"Response containing the JWT token upon successful login","properties":{"jwtToken":{"type":"string","description":"JSON Web Token to be used in the Authorization header","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}}},"UserUpdateRequest":{"type":"object","description":"Request payload for updating user account information","properties":{"username":{"type":"string","description":"New username for the user","example":"john_doe_123"},"email":{"type":"string","format":"email","description":"New email address for the user","example":"john_doe_123@example.com"},"dateOfBirth":{"type":"string","format":"date","description":"New date of birth for the user","example":"1990-01-01"},"firstName":{"type":"string","description":"New first name of the user","example":"John"},"lastName":{"type":"string","description":"New last name of the user","example":"Doe"}}},"ExtendRentalRequest":{"type":"object","description":"Request payload for extending an active rental","properties":{"dueDate":{"type":"string","format":"date","description":"New due date (must extend the current due date)","example":"2026-02-15"}},"required":["dueDate"]},"BookUpdateRequest":{"type":"object","description":"Fields that can be updated for a book (partial update)","properties":{"title":{"type":"string","description":"New title (optional)","example":"The Hobbit: Illustrated Edition"},"ageRating":{"type":"string","description":"New age rating (optional)","enum":["EVERYONE","TODDLER","CHILDREN","TEENAGER","ADULT"],"example":"EVERYONE"},"genres":{"type":"array","description":"New list of genres (optional)","example":["FANTASY","ADVENTURE"],"items":{"type":"string","enum":["FICTION","FANTASY","SCIENCE_FICTION","DYSTOPIAN","ACTION_AND_ADVENTURE","MYSTERY","HORROR","THRILLER","HISTORICAL_FICTION","ROMANCE","CONTEMPORARY_FICTION","LITERARY_FICTION","GRAPHIC_NOVEL","SHORT_STORY","NON_FICTION","MEMOIR","BIOGRAPHY","AUTOBIOGRAPHY","HISTORY","TRAVEL","TRUE_CRIME","HUMOR","ESSAYS","GUIDE_HOW_TO","RELIGION_AND_SPIRITUALITY","HUMANITIES","SCIENCE_AND_TECHNOLOGY","PARENTING","SELF_HELP","COOKBOOK","ART_AND_PHOTOGRAPHY","POETRY"]},"uniqueItems":true},"authorIds":{"type":"array","description":"New list of authors (optional)","example":[1,2,3],"items":{"type":"integer","format":"int64"},"uniqueItems":true}}},"UpdateReviewRequest":{"type":"object","description":"Request payload for updating a review (partial update)","properties":{"rating":{"type":"integer","format":"int32","description":"New rating from 1 to 5 (optional)","example":4,"maximum":5,"minimum":1},"text":{"type":"string","description":"New review text (optional)","example":"Updated: Great book!"},"bookEditionId":{"type":"integer","format":"int64","description":"Book edition ID to assign (optional, can only be set if not already assigned)","example":10}}},"UpdateExactBookCopyRequest":{"type":"object","properties":{"status":{"type":"string","description":"Status of the book copy","enum":["AVAILABLE","BORROWED","RESERVED","LOST","UNAVAILABLE"],"example":"AVAILABLE"}},"required":["status"]},"UpdateBookEditionRequest":{"type":"object","properties":{"isbn":{"type":"string","description":"ISBN number of the book edition","example":"978-3-16-148410-0"},"pageCount":{"type":"integer","format":"int32","description":"Number of pages in the book edition","example":350},"publicationYear":{"type":"integer","format":"int32","description":"Publication year of the book edition","example":2020},"publisherId":{"type":"integer","format":"int64","description":"ID of the publisher of the book edition","example":7},"language":{"type":"string","description":"Language of the book edition expressed as IETF BCP 47 tag or ISO language code","example":"fr"}}},"MultipleUsersResponse":{"type":"object","description":"Response payload containing a list of users","properties":{"users":{"type":"array","items":{"$ref":"#/components/schemas/UserResponse"}}}},"MultipleReviewsResponse":{"type":"object","description":"Response containing a list of reviews","properties":{"reviews":{"type":"array","description":"List of reviews","items":{"$ref":"#/components/schemas/ReviewResponse"}}}},"MultipleRentalsResponse":{"type":"object","description":"Response containing a list of rentals","properties":{"rentals":{"type":"array","description":"List of rentals","items":{"$ref":"#/components/schemas/RentalResponse"}}}},"MultiplePublishersResponse":{"type":"object","description":"Response containing a list of publishers","properties":{"publishers":{"type":"array","description":"List of publishers","items":{"$ref":"#/components/schemas/PublisherResponse"}}}},"MultipleBooksResponse":{"type":"object","description":"Wrapper response containing a list of books","properties":{"books":{"type":"array","description":"List of books","items":{"$ref":"#/components/schemas/BookResponse"}}}},"MultipleBookEditionResponse":{"type":"object","description":"Wrapper response containing a list of book editions","properties":{"bookEditions":{"type":"array","description":"List of book editions","items":{"$ref":"#/components/schemas/BookEditionResponse"}}}},"MultipleAuthorsResponse":{"type":"object","description":"Response containing a list of authors","properties":{"authors":{"type":"array","description":"List of authors","items":{"$ref":"#/components/schemas/AuthorResponse"}}}}},"securitySchemes":{"bearerAuth":{"type":"http","name":"bearerAuth","scheme":"bearer","bearerFormat":"JWT"}}}}
